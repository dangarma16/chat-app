<!DOCTYPE html>
<html>
<head>
    <title>Professional Voice Chat</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ’¬</text></svg>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <!-- Login Screen -->
    <div id="login">
        <h2>Professional Voice Chat</h2>
        <p>Enterprise-grade voice communication with advanced audio controls and secure connections</p>
        <input type="text" id="username" placeholder="Enter your username">
        <button onclick="join()">Join Chat</button>
        <div class="features">
            <p>High-quality voice chat</p>
            <p>Advanced audio controls</p>
            <p>Secure peer-to-peer connections</p>
            <p>Professional interface</p>
        </div>
    </div>
    
    <!-- Main Chat Interface -->
    <div id="chat" style="display:none;">
        <!-- Left Sidebar -->
        <div id="users">
            <h3>Online Users</h3>
            <ul id="usersList"></ul>
            
            <!-- Voice Controls -->
            <div id="voiceControls">
                <h4>Voice Chat</h4>
                <button id="startVoice" onclick="startVoice()">Start Voice</button>
                <button id="stopVoice" onclick="stopVoice()" style="display:none;">Stop Voice</button>
                <div id="voiceStatus">Voice: Off</div>
                
                <!-- Volume Controls -->
                <div id="volumeControls" style="display:none; margin-top: 15px; padding-top: 15px; border-top: 1px solid #40444b;">
                    <h5>Volume Settings</h5>
                    
                    <!-- Mute Buttons -->
                    <div style="display: flex; gap: 5px; margin-bottom: 15px;">
                        <button id="micMuteButton" onclick="toggleMicrophoneMute()" 
                                style="flex: 1; padding: 8px; background-color: #43b581; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 12px;">
                            Mute Mic
                        </button>
                        <button id="speakerMuteButton" onclick="toggleSpeakerMute()" 
                                style="flex: 1; padding: 8px; background-color: #43b581; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 12px;">
                            Mute Speaker
                        </button>
                    </div>
                    
                    <!-- Screen Share Button -->
                    <div style="margin-bottom: 15px;">
                        <button id="screenShareButton" onclick="toggleScreenShare()" 
                                style="width: 100%; padding: 10px; background-color: #3b82f6; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 13px; font-weight: 500;">
                            Share Screen
                        </button>
                    </div>
                    
                    <!-- Debug Button -->
                    <div style="margin-bottom: 15px;">
                        <button onclick="testMuting()" 
                                style="width: 100%; padding: 8px; background-color: #6c757d; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 12px;">
                            Debug Muting
                        </button>
                    </div>
                    
                    <div style="margin-bottom: 10px;">
                        <label style="font-size: 12px; color: #b9bbbe; display: block; margin-bottom: 5px;">
                            Microphone: <span id="micVolumeDisplay">100%</span>
                        </label>
                        <input type="range" id="micVolumeSlider" min="0" max="100" value="100" 
                               style="width: 100%;" oninput="updateMicrophoneVolume(this.value)">
                    </div>
                    
                    <div style="margin-bottom: 10px;">
                        <label style="font-size: 12px; color: #b9bbbe; display: block; margin-bottom: 5px;">
                            Incoming Audio: <span id="incomingVolumeDisplay">100%</span>
                        </label>
                        <input type="range" id="incomingVolumeSlider" min="0" max="100" value="100" 
                               style="width: 100%;" oninput="updateIncomingVolume(this.value)">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Center Screen Viewer -->
        <div id="screenViewer">
            <div id="screenViewerHeader">
                <h3>Screen Share</h3>
                <div id="screenViewerControls">
                    <button id="maximizeChatButton" onclick="toggleChatSize()" title="Maximize Chat">
                        â¬œ
                    </button>
                    <button id="fullScreenButton" onclick="toggleFullScreen()" title="Full Screen" style="display:none;">
                        â›¶
                    </button>
                </div>
            </div>
            <div id="screenViewerContent">
                <div id="noScreenMessage">No one is sharing their screen</div>
                <video id="screenVideo" autoplay muted style="display:none;"></video>
            </div>
        </div>
        
        <!-- Right Chat Area (Minimized) -->
        <div id="messages" class="chat-minimized">
            <!-- Messages Header -->
            <div id="messagesHeader">
                <h3>General Chat</h3>
                <div id="connectionStatus">Connected</div>
            </div>
            
            <!-- Messages List -->
            <div id="messagesList"></div>
            
            <!-- Message Input -->
            <div id="input">
                <textarea id="messageInput" placeholder="Type your message here... (Shift+Enter for new line)" rows="1"></textarea>
                <button onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>
